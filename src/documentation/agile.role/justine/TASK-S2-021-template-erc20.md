# TASK-S2-021: ERC-20 Token Template

## Metadata
- Assignee: Justine
- Role: CPOO/Product Lead
- Sprint: 2
- Priority: P1
- Status: BACKLOG
- Due Date: 2025-12-30
- Estimated Hours: 6h
- Actual Hours: 

## Problem
Developers need production-ready token contracts. Without templates:
- AI generates inconsistent code
- Security patterns missed
- Gas optimization varies
- Slower generation time

Current state: No standardized templates. Every generation starts from scratch.

## Goal
Create production-ready ERC-20 template with common extensions. Enable AI to customize based on user prompts.

## Success Metrics
- Template passes all OpenZeppelin tests
- Gas cost within 10% of hand-optimized
- Supports 5+ configuration options
- Generation time under 5 seconds
- 100% Slither pass rate

## Technical Scope

Files to create:
```
packages/templates/
├── erc20/
│   ├── base.sol
│   ├── mintable.sol
│   ├── burnable.sol
│   ├── pausable.sol
│   ├── permit.sol
│   ├── votes.sol
│   └── config.json
└── tests/
    └── erc20.test.ts
```

Dependencies:
- @openzeppelin/contracts
- foundry

## Minimal Code

```solidity
// packages/templates/erc20/base.sol
// SPDX-License-Identifier: MIT
pragma solidity ^0.8.24;

import {ERC20} from "@openzeppelin/contracts/token/ERC20/ERC20.sol";
import {Ownable} from "@openzeppelin/contracts/access/Ownable.sol";

/**
 * @title {{TOKEN_NAME}}
 * @notice {{TOKEN_DESCRIPTION}}
 * @dev ERC-20 token with configurable extensions
 * 
 * Generated by HyperKit
 * Template: ERC20/Base
 */
contract {{CONTRACT_NAME}} is ERC20, Ownable {
    /// @notice Maximum supply cap (0 = unlimited)
    uint256 public immutable maxSupply;
    
    /// @notice Initial supply minted to deployer
    uint256 public immutable initialSupply;
    
    /**
     * @param _name Token name
     * @param _symbol Token symbol
     * @param _initialSupply Initial supply (in wei)
     * @param _maxSupply Maximum supply cap (0 = unlimited)
     */
    constructor(
        string memory _name,
        string memory _symbol,
        uint256 _initialSupply,
        uint256 _maxSupply
    ) ERC20(_name, _symbol) Ownable(msg.sender) {
        require(
            _maxSupply == 0 || _initialSupply <= _maxSupply,
            "Initial supply exceeds max"
        );
        
        initialSupply = _initialSupply;
        maxSupply = _maxSupply;
        
        if (_initialSupply > 0) {
            _mint(msg.sender, _initialSupply);
        }
    }
    
    /**
     * @notice Returns token decimals
     * @dev Override if non-standard decimals needed
     */
    function decimals() public pure virtual override returns (uint8) {
        return {{DECIMALS}};
    }
}
```

```solidity
// packages/templates/erc20/mintable.sol
// SPDX-License-Identifier: MIT
pragma solidity ^0.8.24;

import {ERC20} from "@openzeppelin/contracts/token/ERC20/ERC20.sol";
import {Ownable} from "@openzeppelin/contracts/access/Ownable.sol";

/**
 * @title {{TOKEN_NAME}}
 * @notice ERC-20 with minting capability
 */
contract {{CONTRACT_NAME}} is ERC20, Ownable {
    uint256 public immutable maxSupply;
    
    error MaxSupplyExceeded();
    
    constructor(
        string memory _name,
        string memory _symbol,
        uint256 _initialSupply,
        uint256 _maxSupply
    ) ERC20(_name, _symbol) Ownable(msg.sender) {
        maxSupply = _maxSupply;
        
        if (_initialSupply > 0) {
            _mint(msg.sender, _initialSupply);
        }
    }
    
    /**
     * @notice Mint new tokens
     * @param to Recipient address
     * @param amount Amount to mint (in wei)
     */
    function mint(address to, uint256 amount) external onlyOwner {
        if (maxSupply > 0 && totalSupply() + amount > maxSupply) {
            revert MaxSupplyExceeded();
        }
        _mint(to, amount);
    }
    
    function decimals() public pure override returns (uint8) {
        return {{DECIMALS}};
    }
}
```

```solidity
// packages/templates/erc20/burnable.sol
// SPDX-License-Identifier: MIT
pragma solidity ^0.8.24;

import {ERC20} from "@openzeppelin/contracts/token/ERC20/ERC20.sol";
import {ERC20Burnable} from "@openzeppelin/contracts/token/ERC20/extensions/ERC20Burnable.sol";
import {Ownable} from "@openzeppelin/contracts/access/Ownable.sol";

/**
 * @title {{TOKEN_NAME}}
 * @notice ERC-20 with burn capability
 */
contract {{CONTRACT_NAME}} is ERC20, ERC20Burnable, Ownable {
    constructor(
        string memory _name,
        string memory _symbol,
        uint256 _initialSupply
    ) ERC20(_name, _symbol) Ownable(msg.sender) {
        if (_initialSupply > 0) {
            _mint(msg.sender, _initialSupply);
        }
    }
    
    function decimals() public pure override returns (uint8) {
        return {{DECIMALS}};
    }
}
```

```solidity
// packages/templates/erc20/permit.sol
// SPDX-License-Identifier: MIT
pragma solidity ^0.8.24;

import {ERC20} from "@openzeppelin/contracts/token/ERC20/ERC20.sol";
import {ERC20Permit} from "@openzeppelin/contracts/token/ERC20/extensions/ERC20Permit.sol";
import {Ownable} from "@openzeppelin/contracts/access/Ownable.sol";

/**
 * @title {{TOKEN_NAME}}
 * @notice ERC-20 with gasless approvals (EIP-2612)
 */
contract {{CONTRACT_NAME}} is ERC20, ERC20Permit, Ownable {
    constructor(
        string memory _name,
        string memory _symbol,
        uint256 _initialSupply
    ) ERC20(_name, _symbol) ERC20Permit(_name) Ownable(msg.sender) {
        if (_initialSupply > 0) {
            _mint(msg.sender, _initialSupply);
        }
    }
    
    function decimals() public pure override returns (uint8) {
        return {{DECIMALS}};
    }
}
```

```json
// packages/templates/erc20/config.json
{
    "template": "ERC20",
    "version": "1.0.0",
    "description": "Standard ERC-20 token with optional extensions",
    "parameters": {
        "TOKEN_NAME": {
            "type": "string",
            "required": true,
            "description": "Full token name",
            "example": "HyperKit Token"
        },
        "TOKEN_SYMBOL": {
            "type": "string",
            "required": true,
            "description": "Token symbol (3-5 chars)",
            "example": "HYPE"
        },
        "CONTRACT_NAME": {
            "type": "string",
            "required": true,
            "description": "Solidity contract name",
            "pattern": "^[A-Z][a-zA-Z0-9]*$"
        },
        "DECIMALS": {
            "type": "number",
            "required": false,
            "default": 18,
            "min": 0,
            "max": 18
        },
        "INITIAL_SUPPLY": {
            "type": "string",
            "required": false,
            "default": "0",
            "description": "Initial supply in tokens (not wei)"
        },
        "MAX_SUPPLY": {
            "type": "string",
            "required": false,
            "default": "0",
            "description": "Max supply cap (0 = unlimited)"
        }
    },
    "extensions": {
        "mintable": {
            "description": "Owner can mint new tokens",
            "file": "mintable.sol"
        },
        "burnable": {
            "description": "Token holders can burn tokens",
            "file": "burnable.sol"
        },
        "pausable": {
            "description": "Owner can pause transfers",
            "file": "pausable.sol"
        },
        "permit": {
            "description": "Gasless approvals (EIP-2612)",
            "file": "permit.sol"
        },
        "votes": {
            "description": "Governance voting power",
            "file": "votes.sol"
        }
    },
    "defaultExtensions": ["permit"],
    "gasEstimate": {
        "deployment": 800000,
        "transfer": 52000,
        "approve": 46000
    }
}
```

## Acceptance Criteria
- [ ] Base ERC-20 template created
- [ ] Mintable extension working
- [ ] Burnable extension working
- [ ] Pausable extension working
- [ ] Permit (EIP-2612) extension working
- [ ] Votes extension working
- [ ] config.json schema defined
- [ ] Template variables documented
- [ ] Extension combinations tested
- [ ] Slither passes on all variants
- [ ] Gas within 10% of OpenZeppelin
- [ ] Unit tests for all extensions
- [ ] Integration with code generation

## Dependencies
- TASK-S1-006: Contract Templates Repo

## Progress Log
| Date | Update | Hours |
|------|--------|-------|

## Review Notes


